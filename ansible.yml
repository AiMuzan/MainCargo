- hosts : localhost
  become: true
  pre_tasks:
    - name: update cache
      apt:
        update_cache: yes
      tags: 
        - update
  tasks:
    - include_tasks: ansible/ssh_plays.yml
      vars:
        public_ssh_key : "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAILDy6+zfQFiEapErmSfi5SMcxDwwj8rdAwQ3084wlmYp aelmediri@gmail.com"
      tags:
        - ssh

    - include_tasks: ansible/zsh_plays.yml
      vars:
        zshrc_path: .zshrc
      tags:
        - zsh

    - include_tasks: ansible/vscode_plays.yml
      vars:
        vscode_config_path: ./.vscode-server/config.yaml
        vscode_settings_path: ./.vscode-server/settings.json
      tags:
        - vscode

    # Install and feature for comfyui
    - include_tasks: src/ansible/install_comfyui_plays.yml
      tags:
        - install_comfyui

    - include_tasks: src/ansible/install_models_plays.yml
      vars:
        huggingface_token : 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
        dest_download_path: /workspace
      tags:
        - install_models

    - include_tasks: src/ansible/config_models_plays.yml
      vars:
        src_download_path: /workspace
        confyui_path: /app/src/ComfyUI
      tags:
        - config_models

        